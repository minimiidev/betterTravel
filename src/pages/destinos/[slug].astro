---
import Layout from "@/layouts/Layout.astro";

import type Destination from "@/inferfaces/Destination";
import { loadQuery } from "@/lib/loadQuery";

const { slug } = Astro.params;
// const modSlug = slug?.toLocaleLowerCase().replace(/\s+/g, "-");
// console.log("ðŸš€ ~ slug:", modSlug);

const destino = await loadQuery<Destination>({
  query: `*[_type == "destination" && slug.current == "${slug}"][0]
  {name,
  "slug" : slug.current,
  "country": country->name,
  price,
  description,
  "imgSrc": image.asset->url
  }
  `,
});

const { data } = destino;
console.log("ðŸš€ ~ data:", data);
const { country, description, imgSrc, name, price } = data;
---

<Layout title={`Viaja por ${name}`}>
  <section class="mt-24 text-black">
    <div class="container">
      <button onclick="history.back()" class="opacity-70 mb-2 pb-3"
        >{`<--- Volver atras`}</button
      >
      <div class="w-full h-96 overflow-hidden">
        <img src={imgSrc} class="w-full h-full rounded-3xl object-contain" />
      </div>
      <article>
        <div class="flex items-center justify-between mt-2">
          <h1 class="h1">{name}</h1>
          <a>{country}</a>
        </div>

        <p>{description}</p>
        <p class="font-bold">RD$ {price}</p>
      </article>
    </div>
  </section>
</Layout>
