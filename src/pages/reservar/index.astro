---
import EmailReservation from "@/components/emails/EmailReservation";
import BackButton from "@/components/shared/BackButton.astro";
import Layout from "@/layouts/Layout.astro";
import { render } from "@react-email/render";
import EmailForm from "./EmailForm";

const cookies = Astro.cookies;
const reservationCookie = cookies.get("reservation");

// if (!reservationCookie) {
//     return Astro.redirect("/");
// }

const reservation = JSON.parse(reservationCookie!.value);
const {
  productType,
  productName,
  checkInDate,
  checkOutDate,
  adults,
  kids,
  checkInTime,
  checkOutTime,
} = reservation;
---

<Layout title="Reservation">
  <section class="pt-[140px] w-full flex items-center justify-center flex-col">
    <BackButton />
    <h1 class="text-center h1">Reservation</h1>
    <!-- <EmailReservation client:only="react" {...reservation} /> -->

    <EmailForm client:only="react" {...reservation} />
    <small class="mt-3 font-medium">Verificar antes de enviar</small>
  </section>
</Layout>

<style>
  form {
    @apply w-[300px] flex items-center justify-center flex-col;
  }

  textarea {
    @apply w-full h-[150px] resize-none overflow-hidden  py-3;
  }

  input {
    @apply w-full px-5 py-2;
  }

  label {
    @apply py-2 rounded-sm font-medium;
  }

  button[type="submit"] {
    @apply mx-auto mt-5 w-[200px] rounded-sm bg-blue-500 px-5 py-3
    font-bold text-white hover:bg-blue-700;
  }
</style>
